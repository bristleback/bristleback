<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/bristleback-0.3.5.js"></script>

  <script type="text/javascript">
    var config = {
      serverUrl: "ws://127.0.0.1:8080/websocket",
      onOpen: function () {
        document.getElementById('status').innerHTML = "The WebSocket Connection Is Open.";
        // $('#status').text("The WebSocket Connection Is Open.");
      },
      onClose: function () {
        document.getElementById('status').innerHTML = "The WebSocket Connection Is Closed.";
      }
    };
    var client = Bristleback.newClient(config);
    var dataController = client.dataController;

    var helloWorld = dataController.getActionClass("HelloWorld");

    helloWorld.defineDefaultAction().setResponseHandler(function (user) {
      $('#status').text("Hello "+user.firstName);
    });

    function connect() {
      client.connect();
    }

    function sendText() {
      var text = $('#textToWrite').val();
      helloWorld.executeDefault(BB.USER_CONTEXT, text);
    }

    function closeConnection() {
      client.disconnect();
    }

  </script>

  <title>Bristleback client version 0.3.5</title>
</head>
<body>
<div id="status">Disconnected. Click connect button to start playing.</div>
<br/>
<input type="button" onclick="connect()" value="Connect">
<input type="button" onclick="closeConnection()" value="Close connection">
<br>
<label>Your name
  <input type="text" id="textToWrite">
</label> <br>

<label>
  <input type="button" onclick="sendText()" value="Click hello world!">
</label>